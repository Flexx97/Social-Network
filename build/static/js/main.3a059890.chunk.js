(this["webpackJsonpit-react-kabzda-1"]=this["webpackJsonpit-react-kabzda-1"]||[]).push([[0],{11:function(e,t,a){e.exports={nav:"nav-bar_nav__3sa2Y",item:"nav-bar_item__1qPG_",active:"nav-bar_active__2WyWO",best:"nav-bar_best__2K3__"}},126:function(e,t,a){e.exports=a.p+"static/media/user.65d84bf5.png"},127:function(e,t,a){e.exports=a.p+"static/media/audio.8f8f3d19.svg"},128:function(e,t,a){e.exports={header:"header_header__2nDLm"}},154:function(e,t,a){e.exports=a(281)},18:function(e,t,a){e.exports={message:"Dialogs_message__3AC4Y",active:"Dialogs_active__2E0jx",dialogs:"Dialogs_dialogs__352bg",dialog:"Dialogs_dialog__23Eoq",chats:"Dialogs_chats__32Bm0",send:"Dialogs_send__2F9xy",btn:"Dialogs_btn__1YHVM"}},236:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},281:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),u=a(7),o=a(42),c=a(9),i=a(121).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"e73e7e4e-cc87-4989-8a25-3b3153927263"}}),l=function(e,t){return i.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},m=function(e){return i.post("follow/".concat(e))},d=function(e){return i.delete("follow/".concat(e))},p=function(){return i.get("auth/me")},f=function(e,t,a){return i.post("auth/login",{email:e,password:t,rememberMe:a})},g=function(){return i.delete("auth/login")},E=function(e){return i.get("profile/"+e)},b=function(e){return i.get("/profile/status/"+e)},h=function(e){return i.put("/profile/status",{status:e})},v=function(e){return{type:"GET_STATUS",status:e}},_={PostData:[{like:20,message:"Hi, how are you?",id:1},{like:15486,message:"It's my first post",id:2}],profile:null,status:""},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var a={like:0,message:t.value.posText};return Object(c.a)({},e,{PostData:[].concat(Object(o.a)(e.PostData),[a])});case"NEW_PROFILE":return Object(c.a)({},e,{profile:t.profile});case"GET_STATUS":return Object(c.a)({},e,{status:t.status});case"DELETE_POST":return Object(c.a)({},e,{PostData:e.PostData.filter((function(e){return e.id!==t.num}))});default:return e}},P={Data:[{id:1,name:"Katya"},{id:2,name:"Fedor"},{id:3,name:"Alexey"}],MesData:[{message:"what are you doing"},{message:"You suck"}]},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TEXT":return Object(c.a)({},e,{MesData:[].concat(Object(o.a)(e.MesData),[{message:t.value.messageText}])});default:return e}},j={NavBestFriends:[{name:"Katya",img:"https://www.meme-arsenal.com/memes/ae1d44253a861f53d95864dd37c55a78.jpg"},{name:"Stepa",img:"https://i.pinimg.com/736x/4a/bc/c0/4abcc00427dbb86ee5da8270b52204f8.jpg"},{name:"Vitya",img:"https://i.pinimg.com/originals/0c/a9/e2/0ca9e28dcb12dc698cfd2beda6d6fa64.jpg"}]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;arguments.length>1&&arguments[1];return e},S=function(e){return{type:"SETUSERS",users:e}},A=function(e){return{type:"TOGGLE_LOADING",val:e}},w=function(e,t){return{type:"TOGGLE_FOLLOW_PROGRESS",stateFollow:e,userId:t}},D={users:[],pageNumber:1,PageSize:5,totalCount:50,loaded:!0,page:[1,2,3,4],isFollowedProgress:[]},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(c.a)({},e,{users:e.users.map((function(e){return e.id===t.userID?Object(c.a)({},e,{followed:!0}):e}))});case"UNFOLLOW":return Object(c.a)({},e,{users:e.users.map((function(e){return e.id===t.userID?Object(c.a)({},e,{followed:!1}):e}))});case"SETUSERS":return Object(c.a)({},e,{users:t.users});case"CHANGEPAGE":return Object(c.a)({},e,{pageNumber:t.num});case"SET_TOTAL_COUNT":return Object(c.a)({},e,{totalCount:t.totalCount});case"UPDATEPAGE":return Object(c.a)({},e,{pageNumber:t.updateNumber});case"UPDATEPAGENUMBER":return Object(c.a)({},e,{page:void 0===t.newPage?e.page:t.newPage});case"TOGGLE_LOADING":return Object(c.a)({},e,{loaded:t.val});case"LOAD_USERS":return Object(c.a)({},e,{users:[]});case"TOGGLE_FOLLOW_PROGRESS":return Object(c.a)({},e,{isFollowedProgress:t.stateFollow?[].concat(Object(o.a)(e.isFollowedProgress),[t.userId]):e.isFollowedProgress.filter((function(e){return e!==t.userId}))});default:return e}},U=a(37),k=function(e,t,a,n){return{type:"SET_USER",userId:e,login:t,email:a,isAuth:n}},F={userId:null,login:null,email:null,isAuth:!1},L=function(){return function(e){p().then((function(t){0===t.data.resultCode&&e(k(t.data.data.id,t.data.data.login,t.data.data.email,!0))}))}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(c.a)({},e,{userId:t.userId,login:t.login,email:t.email,isAuth:t.isAuth});default:return e}},x=a(122),M=a(120),I=Object(u.c)({profilePage:O,messagePage:N,BestFriends:y,UsersPage:C,auth:T,form:M.a}),G=Object(u.e)(I,Object(u.a)(x.a)),B=a(62),R=a.n(B),W=(a(236),a(11)),z=a.n(W),Y=a(10),K=a(51),H=a.n(K),J=function(e){var t=e.FriendsWay.map((function(e){return s.a.createElement("div",null,s.a.createElement("img",{className:H.a.img,src:e.img}),s.a.createElement("div",null,e.name))}));return s.a.createElement("div",{className:H.a.best},s.a.createElement("div",{className:H.a.decor},"Best Friends"),s.a.createElement("div",{className:H.a.frpos},t))},V=a(8),X=Object(V.b)((function(e){return{FriendsWay:e.BestFriends.NavBestFriends}}),(function(e){return{changeFriends:function(t){e(y(t))}}}))(J),q=function(e){return s.a.createElement("nav",{className:z.a.nav},s.a.createElement(Y.b,{to:"/profile",className:z.a.item,activeClassName:z.a.active},"Profile"),s.a.createElement(Y.b,{to:"/dialogs",className:z.a.item,activeClassName:z.a.active},"Messages"),s.a.createElement(Y.b,{to:"/users",className:z.a.item,activeClassName:z.a.active},"Users"),s.a.createElement(Y.b,{to:"/news",className:z.a.item,activeClassName:z.a.active},"News"),s.a.createElement(Y.b,{to:"/music",className:z.a.item,activeClassName:z.a.active},"Music"),s.a.createElement(Y.b,{to:"settings",className:"".concat(z.a.item," ").concat(z.a.important),activeClassName:z.a.active},"Settings"),s.a.createElement("div",{className:"".concat(z.a.best," ").concat(z.a.item)},s.a.createElement(X,null)))},Q=a(31),Z=(a(241),function(){return s.a.createElement("div",null,s.a.createElement("p",null,"News"))}),$=(a(242),function(){return s.a.createElement("div",null,s.a.createElement("p",null,"Music"))}),ee=(a(243),function(){return s.a.createElement("div",null,s.a.createElement("p",null,"Settings"))}),te=a(18),ae=a.n(te),ne=function(e){return s.a.createElement("div",{className:"".concat(ae.a.dialog," ").concat(ae.a.active)},s.a.createElement(Y.b,{to:"/dialogs/"+e.id},e.name))},re=function(e){return s.a.createElement("div",{className:ae.a.message},e.message)},se=a(118),ue=a(119),oe=a(85),ce=function(e){e.input;var t=e.meta,a=(e.child,Object(oe.a)(e,["input","meta","child"]));return s.a.createElement("div",null,s.a.createElement("div",null,a.children),t.touched&&(t.error&&s.a.createElement("span",null,t.error)||t.warning&&s.a.createElement("span",null,t.warning)))},ie=function(e){var t=e.input,a=(e.meta,e.child,Object(oe.a)(e,["input","meta","child"]));return s.a.createElement("div",null,s.a.createElement(ce,e,s.a.createElement("textarea",Object.assign({},t,a))))},le=function(e){return e?void 0:"Required"},me=(n=15,function(e){if(e.length>n)return"\u041c\u043d\u043e\u0433\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}),de=Object(ue.a)({form:"messages"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement(se.a,{component:ie,type:"textarea",name:"messageText",className:ae.a.send,validate:[le]}),s.a.createElement("button",{className:ae.a.btn},"send"))})),pe=function(e){var t=e.Data.map((function(e){return s.a.createElement(ne,{name:e.name,id:e.id})})),a=e.newMessageWay.map((function(e){return s.a.createElement(re,{message:e.message,id:e.id})}));return s.a.createElement("div",{className:ae.a.message},s.a.createElement("div",{className:ae.a.dialogs},t),s.a.createElement("div",{className:ae.a.chats},a,s.a.createElement(de,{onSubmit:function(t){e.addText(t)}})))},fe=a(21),ge=a(22),Ee=a(24),be=a(23),he=a(25),ve=function(e){var t=function(t){function a(){return Object(fe.a)(this,a),Object(Ee.a)(this,Object(be.a)(a).apply(this,arguments))}return Object(he.a)(a,t),Object(ge.a)(a,[{key:"render",value:function(){return!1===this.props.isAuth?s.a.createElement(Q.a,{to:"/login"}):s.a.createElement(e,this.props)}}]),a}(s.a.Component);return Object(V.b)((function(e){return{isAuth:e.auth.isAuth}}))(t)},_e=Object(u.d)(Object(V.b)((function(e){return{newMessageWay:e.messagePage.MesData,Data:e.messagePage.Data}}),{addText:function(e){return{type:"ADD_TEXT",value:e}}}),ve)(pe),Oe=a(32),Pe=a.n(Oe),Ne=a(126),je=a.n(Ne),ye=function(e){var t=Math.ceil(e.totalCount/e.PageSize);return e.page.splice(3,1,t),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("span",{onClick:function(){return function(){var t=e.pageNumber-1,a=e.page.map((function(e){return e-1}));e.updatePage(t,a)}()}},"Next"),s.a.createElement("span",null,e.page.map((function(t){return s.a.createElement("span",{className:"".concat(t===e.pageNumber&&Pe.a.numberActive," ").concat(Pe.a.number),onClick:function(){e.updatePage(t)}},t)}))),s.a.createElement("span",{onClick:function(){return function(){var t=e.pageNumber+1,a=e.page.map((function(e){return e+1}));e.updatePage(t,a)}()}},"Next")),e.userState.map((function(t){return s.a.createElement("div",{className:Pe.a.uBlock,key:t.id},s.a.createElement(Y.b,{to:"profile/".concat(t.id)},s.a.createElement("img",{src:null==t.photos.small?je.a:t.photos.small,className:Pe.a.avatar})),s.a.createElement("div",{className:Pe.a.blockName},s.a.createElement("h5",null,t.name),s.a.createElement("p",null,t.status)),t.followed?s.a.createElement("button",{disabled:e.followProgress.some((function(e){return e===t.id})),onClick:function(){e.followUserAction(t.id)},className:Pe.a.btn},"Unfollow"):s.a.createElement("button",{disabled:e.followProgress.some((function(e){return e===t.id})),onClick:function(){e.unFollowUserAction(t.id)},className:Pe.a.btn},"Follow"))})))},Se=a(127),Ae=a.n(Se),we=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:Ae.a}))},De=function(e){return e.UsersPage.users},Ce=function(e){return e.UsersPage.pageNumber},Ue=function(e){return e.UsersPage.PageSize},ke=function(e){return e.UsersPage.totalCount},Fe=function(e){return e.UsersPage.page},Le=function(e){return e.UsersPage.loaded},Te=function(e){return e.UsersPage.isFollowedProgress},xe=function(e){function t(){var e,a;Object(fe.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(Ee.a)(this,(e=Object(be.a)(t)).call.apply(e,[this].concat(r)))).updatePage=function(e,t){a.props.ChangePageUpdate(e,t,a.props.PageSize)},a}return Object(he.a)(t,e),Object(ge.a)(t,[{key:"componentDidMount",value:function(){this.props.getUser(this.props.pageNumber,this.props.PageSize)}},{key:"render",value:function(){return s.a.createElement("div",null,!0===this.props.loaded?s.a.createElement(we,null):null,s.a.createElement(ye,{page:this.props.page,pageNumber:this.props.pageNumber,userState:this.props.userState,totalCount:this.props.totalCount,PageSize:this.props.PageSize,updatePage:this.updatePage,UpdateNumber:this.props.UpdateNumber,followProgress:this.props.followProgress,followUserAction:this.props.followUserAction,unFollowUserAction:this.props.unFollowUserAction}))}}]),t}(s.a.Component),Me=Object(V.b)((function(e){return{userState:De(e),pageNumber:Ce(e),PageSize:Ue(e),totalCount:ke(e),page:Fe(e),loaded:Le(e),followProgress:Te(e)}}),{getUser:function(e,t){return function(a){a({type:"LOAD_USERS"}),a(A(!0)),l(e,t).then((function(e){a(A(!1)),a(S(e.items)),a({type:"SET_TOTAL_COUNT",totalCount:e.totalCount})}))}},ChangePageUpdate:function(e,t,a){return function(n){n({type:"LOAD_USERS"}),n(A(!0)),n({type:"CHANGEPAGE",num:e}),n(function(e){return{type:"UPDATEPAGENUMBER",newPage:e}}(t)),l(e,a).then((function(e){n(A(!1)),n(S(e.items))}))}},followUserAction:function(e){return function(t){t(w(!0,e)),d(e).then((function(a){0===a.data.resultCode&&(t({type:"UNFOLLOW",userID:e}),t(w(!1,e)))}))}},unFollowUserAction:function(e){return function(t){t(w(!0,e)),m(e).then((function(a){0===a.data.resultCode&&(t({type:"FOLLOW",userID:e}),t(w(!1,e)))}))}}})(xe),Ie=a(65),Ge=a.n(Ie),Be=function(e){function t(){var e,a;Object(fe.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(Ee.a)(this,(e=Object(be.a)(t)).call.apply(e,[this].concat(r)))).state={editMode:!1,status:a.props.status},a.activeEditMode=function(){a.setState({editMode:!0})},a.unActiveEditMode=function(){a.setState({editMode:!1}),a.props.updateStatus(a.state.status)},a.onChangeStatus=function(e){a.setState({status:e.currentTarget.value})},a}return Object(he.a)(t,e),Object(ge.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,!1===this.state.editMode?s.a.createElement("div",{onDoubleClick:this.activeEditMode,className:Ge.a.status},this.state.status||"--------"):s.a.createElement("input",{onChange:this.onChangeStatus,autoFocus:!0,onBlur:this.unActiveEditMode,value:this.state.status}))}}]),t}(s.a.Component),Re=function(e){return e.userProfile?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:Ge.a.avatar},s.a.createElement("img",{src:e.userProfile.photos.small,height:"100px",width:"100px"}),s.a.createElement("div",null,s.a.createElement("div",null,e.userProfile.fullName),s.a.createElement(Be,{status:e.status,updateStatus:e.updateStatus})))):s.a.createElement(we,null)},We=a(52),ze=a.n(We),Ye=function(e){return s.a.createElement("div",{className:ze.a.block},s.a.createElement("div",{className:ze.a.item},e.message),s.a.createElement("span",{className:ze.a.likely},s.a.createElement("img",{src:"https://1.bp.blogspot.com/-d3LozscUMBY/Vtz13aLffMI/AAAAAAAALp0/Y9pFym980s0/s1600/love.png",className:ze.a.img}),e.like))},Ke=a(53),He=a.n(Ke),Je=Object(ue.a)({form:"Post"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement(se.a,{component:ie,type:"textarea",name:"posText",className:He.a.textarea,validate:[le,me]}),s.a.createElement("div",null,s.a.createElement("button",{className:He.a.btn},"send")))})),Ve=function(e){var t=e.newPostWay.map((function(e){return s.a.createElement(Ye,{message:e.message,like:e.like})}));return s.a.createElement("div",null,s.a.createElement("div",{className:He.a.myp},s.a.createElement("div",null,"New posts"),s.a.createElement(Je,{onSubmit:function(t){e.addPostActionCreator(t)}})),s.a.createElement("div",{className:He.a.post},"My post"),t)},Xe=Object(V.b)((function(e){return{newPostWay:e.profilePage.PostData}}),{addPostActionCreator:function(e){return{type:"ADD_POST",value:e}}})(Ve),qe=function(e){return s.a.createElement("div",null,s.a.createElement(Re,{userProfile:e.userProfile,status:e.status,updateStatus:e.updateStatus}),s.a.createElement(Xe,{store:e.store}))},Qe=function(e){function t(){return Object(fe.a)(this,t),Object(Ee.a)(this,Object(be.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(ge.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId),this.props.getProfile(e),this.props.statusGet(e)}},{key:"render",value:function(){return s.a.createElement(qe,this.props)}}]),t}(s.a.Component),Ze=Object(u.d)(Object(V.b)((function(e){return{userProfile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getProfile:function(e){return function(t){E(e).then((function(e){t(function(e){return{type:"NEW_PROFILE",profile:e}}(e.data))}))}},statusGet:function(e){return function(t){b(e).then((function(e){t(v(e.data))}))}},updateStatus:function(e){return function(t){h(e).then((function(a){0===a.data.resultCode&&t(v(e))}))}}}),Q.f,ve)(Qe),$e=a(128),et=a.n($e),tt=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("header",{className:et.a.header},s.a.createElement("div",null,e.login?s.a.createElement("div",null,e.login,s.a.createElement("button",{onClick:function(){e.getLogOut()}},"Log out")):"You not authorized")))},at=function(e){function t(){return Object(fe.a)(this,t),Object(Ee.a)(this,Object(be.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(ge.a)(t,[{key:"componentDidMount",value:function(){this.props.getAuthMe()}},{key:"render",value:function(){return s.a.createElement(tt,Object.assign({},this.props,{login:this.props.login}))}}]),t}(s.a.Component),nt=Object(V.b)((function(e){return{login:e.auth.login}}),{getAuthMe:L,getLogOut:function(){return function(e){g().then((function(t){0===t.data.resultCode&&e(k(null,null,null,!1))}))}}})(at),rt=Object(ue.a)({form:"Login"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("div",null,s.a.createElement(se.a,{placeholder:"Login",component:"input",type:"textarea",name:"login"})),s.a.createElement("div",null,s.a.createElement(se.a,{placeholder:"Password",component:"input",type:"textarea",name:"password"})),s.a.createElement("div",null,s.a.createElement(se.a,{component:"input",type:"checkbox",name:"rememberMe"}),"Remember me"),s.a.createElement("div",null,e.error),s.a.createElement("div",null,s.a.createElement("button",null,"Log In")))})),st=Object(V.b)((function(e){return{isAuth:e.auth.isAuth}}),{getLogIn:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n){f(e,t,a).then((function(e){if(0===e.data.resultCode)n(L());else{var t=e.data.messages[0];n(Object(U.a)("Login",{_error:t}))}}))}}})((function(e){return!0===e.isAuth?s.a.createElement(Q.a,{to:"/profile"}):s.a.createElement("div",null,s.a.createElement("h1",null,"Login"),s.a.createElement(rt,{onSubmit:function(t){e.getLogIn(t.login,t.password,t.rememberMe)}}))})),ut=function(){return s.a.createElement(Y.a,null,s.a.createElement("div",{className:"app-wrapper"},s.a.createElement(nt,null),s.a.createElement(q,null),s.a.createElement("div",{className:"app-wrapper-content"},s.a.createElement(Q.b,{path:"/dialogs",render:function(){return s.a.createElement(_e,null)}}),s.a.createElement(Q.b,{path:"/profile/:userId?",render:function(){return s.a.createElement(Ze,null)}}),s.a.createElement(Q.b,{path:"/users",render:function(){return s.a.createElement(Me,null)}}),s.a.createElement(Q.b,{path:"/news",render:function(){return s.a.createElement(Z,null)}}),s.a.createElement(Q.b,{path:"/music",render:function(){return s.a.createElement($,null)}}),s.a.createElement(Q.b,{path:"/settings",render:function(){return s.a.createElement(ee,null)}}),s.a.createElement(Q.b,{path:"/login",render:function(){return s.a.createElement(st,null)}}))))};R.a.render(s.a.createElement(Y.a,null,s.a.createElement(V.a,{store:G},s.a.createElement(ut,null))),document.getElementById("root"))},32:function(e,t,a){e.exports={uBlock:"users_uBlock__32N58",avatar:"users_avatar__3c1ry",blockName:"users_blockName__85_SX",btn:"users_btn__28Nfk",number:"users_number__151KN",numberActive:"users_numberActive__nPGYg"}},51:function(e,t,a){e.exports={best:"BestFriends_best__1S-FN",decor:"BestFriends_decor__1DJmK",frpos:"BestFriends_frpos__3xBWG",img:"BestFriends_img__1nllb"}},52:function(e,t,a){e.exports={item:"Post_item__2OxKC",block:"Post_block__aBsxY",likely:"Post_likely__2z6NV",img:"Post_img__2Uoru"}},53:function(e,t,a){e.exports={myp:"myPosts_myp__3efv-",textarea:"myPosts_textarea__227XI",btn:"myPosts_btn__3Kk4N",post:"myPosts_post__14ouh"}},65:function(e,t,a){e.exports={avatar:"userinfo_avatar__2WOm7",status:"userinfo_status__2m7Jr"}}},[[154,1,2]]]);
//# sourceMappingURL=main.3a059890.chunk.js.map