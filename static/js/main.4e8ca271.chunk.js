(this["webpackJsonpit-react-kabzda-1"]=this["webpackJsonpit-react-kabzda-1"]||[]).push([[0],{128:function(e,t,a){e.exports=a.p+"static/media/audio.9f6e39ad.svg"},13:function(e,t,a){e.exports={nav:"nav-bar_nav__3sa2Y",item:"nav-bar_item__1qPG_",best:"nav-bar_best__2K3__"}},154:function(e,t,a){e.exports=a(281)},18:function(e,t,a){e.exports={message:"Dialogs_message__3AC4Y",active:"Dialogs_active__2E0jx",dialogs:"Dialogs_dialogs__352bg",dialog:"Dialogs_dialog__23Eoq",chats:"Dialogs_chats__32Bm0",send:"Dialogs_send__2F9xy",btn:"Dialogs_btn__1YHVM"}},236:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},27:function(e,t,a){e.exports={uBlock:"users_uBlock__32N58",avatar:"users_avatar__3c1ry",blockName:"users_blockName__85_SX",btn:"users_btn__28Nfk",number:"users_number__151KN",numberActive:"users_numberActive__nPGYg",numb:"users_numb__2IVVD"}},281:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),o=a(7),u=a(42),c=a(8),l=a(123).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"e73e7e4e-cc87-4989-8a25-3b3153927263"}}),i=function(e,t){return l.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},m=function(e){return l.post("follow/".concat(e))},p=function(e){return l.delete("follow/".concat(e))},d=function(){return l.get("auth/me")},f=function(e,t,a){return l.post("auth/login",{email:e,password:t,rememberMe:a})},g=function(){return l.delete("auth/login")},E=function(e){return l.get("profile/"+e)},b=function(e){return l.get("/profile/status/"+e)},h=function(e){return l.put("/profile/status",{status:e})},_=function(e){return{type:"GET_STATUS",status:e}},v={PostData:[{like:20,message:"Hi, how are you?",id:1},{like:15486,message:"It's my first post",id:2}],profile:null,status:""},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var a={like:0,message:t.value.posText};return Object(c.a)({},e,{PostData:[].concat(Object(u.a)(e.PostData),[a])});case"NEW_PROFILE":return Object(c.a)({},e,{profile:t.profile});case"GET_STATUS":return Object(c.a)({},e,{status:t.status});case"DELETE_POST":return Object(c.a)({},e,{PostData:e.PostData.filter((function(e){return e.id!==t.num}))});default:return e}},P={Data:[{id:1,name:"Katya"},{id:2,name:"Fedor"},{id:3,name:"Alexey"}],MesData:[{message:"what are you doing"},{message:"You suck"}]},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TEXT":return Object(c.a)({},e,{MesData:[].concat(Object(u.a)(e.MesData),[{message:t.value.messageText}])});default:return e}},w={NavBestFriends:[{name:"Katya",img:"https://www.meme-arsenal.com/memes/ae1d44253a861f53d95864dd37c55a78.jpg"},{name:"Stepa",img:"https://i.pinimg.com/736x/4a/bc/c0/4abcc00427dbb86ee5da8270b52204f8.jpg"},{name:"Vitya",img:"https://i.pinimg.com/originals/0c/a9/e2/0ca9e28dcb12dc698cfd2beda6d6fa64.jpg"}]},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;arguments.length>1&&arguments[1];return e},y=function(e){return{type:"SETUSERS",users:e}},A=function(e){return{type:"TOGGLE_LOADING",val:e}},S=function(e,t){return{type:"TOGGLE_FOLLOW_PROGRESS",stateFollow:e,userId:t}},U={users:[],pageNumber:1,PageSize:5,totalCount:50,loaded:!0,page:[1,2,3,4],isFollowedProgress:[]},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(c.a)({},e,{users:e.users.map((function(e){return e.id===t.userID?Object(c.a)({},e,{followed:!0}):e}))});case"UNFOLLOW":return Object(c.a)({},e,{users:e.users.map((function(e){return e.id===t.userID?Object(c.a)({},e,{followed:!1}):e}))});case"SETUSERS":return Object(c.a)({},e,{users:t.users});case"CHANGEPAGE":return Object(c.a)({},e,{pageNumber:t.num});case"SET_TOTAL_COUNT":return Object(c.a)({},e,{totalCount:t.totalCount});case"UPDATEPAGE":return Object(c.a)({},e,{pageNumber:t.updateNumber});case"UPDATEPAGENUMBER":return Object(c.a)({},e,{page:void 0===t.newPage?e.page:t.newPage});case"TOGGLE_LOADING":return Object(c.a)({},e,{loaded:t.val});case"LOAD_USERS":return Object(c.a)({},e,{users:[]});case"TOGGLE_FOLLOW_PROGRESS":return Object(c.a)({},e,{isFollowedProgress:t.stateFollow?[].concat(Object(u.a)(e.isFollowedProgress),[t.userId]):e.isFollowedProgress.filter((function(e){return e!==t.userId}))});default:return e}},D=a(37),k=function(e,t,a,n){return{type:"SET_USER",userId:e,login:t,email:a,isAuth:n}},L={userId:null,login:null,email:null,isAuth:!1},T=function(){return function(e){d().then((function(t){0===t.data.resultCode&&e(k(t.data.data.id,t.data.data.login,t.data.data.email,!0))}))}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(c.a)({},e,{userId:t.userId,login:t.login,email:t.email,isAuth:t.isAuth});default:return e}},I=a(124),M=a(122),F=Object(o.c)({profilePage:O,messagePage:N,BestFriends:j,UsersPage:C,auth:x,form:M.a}),G=Object(o.e)(F,Object(o.a)(I.a)),R=a(60),z=a.n(R),W=(a(236),a(13)),B=a.n(W),Y=a(10),K=function(e){return s.a.createElement("nav",{className:B.a.nav},s.a.createElement(Y.c,{to:"/profile",className:B.a.item,activeClassName:B.a.active},s.a.createElement("span",{class:"material-icons"},"person_outline"),"Profile"),s.a.createElement(Y.c,{to:"/dialogs",className:B.a.item,activeClassName:B.a.active},s.a.createElement("span",{class:"material-icons"},"mail"),"Messages"),s.a.createElement(Y.c,{to:"/users",className:B.a.item,activeClassName:B.a.active},s.a.createElement("span",{class:"material-icons"},"group"),"Users"),s.a.createElement(Y.c,{to:"/news",className:B.a.item,activeClassName:B.a.active},s.a.createElement("span",{class:"material-icons"},"fiber_new"),"News"),s.a.createElement(Y.c,{to:"/music",className:B.a.item,activeClassName:B.a.active},s.a.createElement("span",{class:"material-icons"},"library_music"),"Music"),s.a.createElement(Y.c,{to:"settings",className:"".concat(B.a.item," ").concat(B.a.important),activeClassName:B.a.active},s.a.createElement("span",{class:"material-icons"},"settings"),"Settings"))},V=a(32),H=(a(241),function(){return s.a.createElement("div",null,s.a.createElement("p",null,"News"))}),X=(a(242),function(){return s.a.createElement("div",null,s.a.createElement("p",null,"Music"))}),q=(a(243),function(){return s.a.createElement("div",null,s.a.createElement("p",null,"Settings"))}),J=a(18),Z=a.n(J),Q=function(e){return s.a.createElement("div",{className:"".concat(Z.a.dialog," ").concat(Z.a.active)},s.a.createElement(Y.c,{to:"/dialogs/"+e.id},e.name))},$=function(e){return s.a.createElement("div",{className:Z.a.message},e.message)},ee=a(120),te=a(121),ae=a(87),ne=function(e){e.input;var t=e.meta,a=(e.child,Object(ae.a)(e,["input","meta","child"]));return s.a.createElement("div",null,s.a.createElement("div",null,a.children),t.touched&&(t.error&&s.a.createElement("span",null,t.error)||t.warning&&s.a.createElement("span",null,t.warning)))},re=function(e){var t=e.input,a=(e.meta,e.child,Object(ae.a)(e,["input","meta","child"]));return s.a.createElement("div",null,s.a.createElement(ne,e,s.a.createElement("textarea",Object.assign({},t,a))))},se=function(e){return e?void 0:"Required"},oe=(n=15,function(e){if(e.length>n)return"\u041c\u043d\u043e\u0433\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}),ue=Object(te.a)({form:"messages"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement(ee.a,{component:re,type:"textarea",name:"messageText",className:Z.a.send,validate:[se]}),s.a.createElement("button",{className:Z.a.btn},"send"))})),ce=function(e){var t=e.Data.map((function(e){return s.a.createElement(Q,{name:e.name,id:e.id})})),a=e.newMessageWay.map((function(e){return s.a.createElement($,{message:e.message,id:e.id})}));return s.a.createElement("div",{className:Z.a.message},s.a.createElement("div",{className:Z.a.dialogs},t),s.a.createElement("div",{className:Z.a.chats},a,s.a.createElement(ue,{onSubmit:function(t){e.addText(t)}})))},le=a(9),ie=a(21),me=a(22),pe=a(24),de=a(23),fe=a(25),ge=function(e){var t=function(t){function a(){return Object(ie.a)(this,a),Object(pe.a)(this,Object(de.a)(a).apply(this,arguments))}return Object(fe.a)(a,t),Object(me.a)(a,[{key:"render",value:function(){return!1===this.props.isAuth?s.a.createElement(V.a,{to:"/login"}):s.a.createElement(e,this.props)}}]),a}(s.a.Component);return Object(le.b)((function(e){return{isAuth:e.auth.isAuth}}))(t)},Ee=Object(o.d)(Object(le.b)((function(e){return{newMessageWay:e.messagePage.MesData,Data:e.messagePage.Data}}),{addText:function(e){return{type:"ADD_TEXT",value:e}}}),ge)(ce),be=a(27),he=a.n(be),_e=a(63),ve=a.n(_e),Oe=function(e){var t=Math.ceil(e.totalCount/e.PageSize);return e.page.splice(3,1,t),s.a.createElement("div",null,s.a.createElement("div",{className:he.a.numb},s.a.createElement("span",{onClick:function(){return function(){var t=e.pageNumber-1,a=e.page.map((function(e){return e-1}));e.updatePage(t,a)}()},className:"material-icons"},"arrow_back_ios"),s.a.createElement("span",null,e.page.map((function(t){return s.a.createElement("span",{className:"".concat(t===e.pageNumber&&he.a.numberActive," ").concat(he.a.number),onClick:function(){e.updatePage(t)}},t)}))),s.a.createElement("span",{onClick:function(){return function(){var t=e.pageNumber+1,a=e.page.map((function(e){return e+1}));e.updatePage(t,a)}()},className:"material-icons"},"arrow_forward_ios")),e.userState.map((function(t){return s.a.createElement("div",{className:he.a.uBlock,key:t.id},s.a.createElement(Y.c,{to:"profile/".concat(t.id)},s.a.createElement("img",{src:null==t.photos.small?ve.a:t.photos.small,className:he.a.avatar})),s.a.createElement("div",{className:he.a.blockName},s.a.createElement("h5",null,t.name),s.a.createElement("p",null,t.status)),t.followed?s.a.createElement("button",{disabled:e.followProgress.some((function(e){return e===t.id})),onClick:function(){e.followUserAction(t.id)},className:he.a.btn},"Unfollow"):s.a.createElement("button",{disabled:e.followProgress.some((function(e){return e===t.id})),onClick:function(){e.unFollowUserAction(t.id)},className:he.a.btn},"Follow"))})))},Pe=a(128),Ne=a.n(Pe),we=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:Ne.a}))},je=function(e){return e.UsersPage.users},ye=function(e){return e.UsersPage.pageNumber},Ae=function(e){return e.UsersPage.PageSize},Se=function(e){return e.UsersPage.totalCount},Ue=function(e){return e.UsersPage.page},Ce=function(e){return e.UsersPage.loaded},De=function(e){return e.UsersPage.isFollowedProgress},ke=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(pe.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).updatePage=function(e,t){a.props.ChangePageUpdate(e,t,a.props.PageSize)},a}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"componentDidMount",value:function(){this.props.getUser(this.props.pageNumber,this.props.PageSize)}},{key:"render",value:function(){return s.a.createElement("div",null,!0===this.props.loaded?s.a.createElement(we,null):null,s.a.createElement(Oe,{page:this.props.page,pageNumber:this.props.pageNumber,userState:this.props.userState,totalCount:this.props.totalCount,PageSize:this.props.PageSize,updatePage:this.updatePage,UpdateNumber:this.props.UpdateNumber,followProgress:this.props.followProgress,followUserAction:this.props.followUserAction,unFollowUserAction:this.props.unFollowUserAction}))}}]),t}(s.a.Component),Le=Object(le.b)((function(e){return{userState:je(e),pageNumber:ye(e),PageSize:Ae(e),totalCount:Se(e),page:Ue(e),loaded:Ce(e),followProgress:De(e)}}),{getUser:function(e,t){return function(a){a({type:"LOAD_USERS"}),a(A(!0)),i(e,t).then((function(e){a(A(!1)),a(y(e.items)),a({type:"SET_TOTAL_COUNT",totalCount:e.totalCount})}))}},ChangePageUpdate:function(e,t,a){return function(n){n({type:"LOAD_USERS"}),n(A(!0)),n({type:"CHANGEPAGE",num:e}),n(function(e){return{type:"UPDATEPAGENUMBER",newPage:e}}(t)),i(e,a).then((function(e){n(A(!1)),n(y(e.items))}))}},followUserAction:function(e){return function(t){t(S(!0,e)),p(e).then((function(a){0===a.data.resultCode&&(t({type:"UNFOLLOW",userID:e}),t(S(!1,e)))}))}},unFollowUserAction:function(e){return function(t){t(S(!0,e)),m(e).then((function(a){0===a.data.resultCode&&(t({type:"FOLLOW",userID:e}),t(S(!1,e)))}))}}})(ke),Te=a(64),xe=a.n(Te),Ie=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(pe.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={editMode:!1,status:a.props.status},a.activeEditMode=function(){a.setState({editMode:!0})},a.unActiveEditMode=function(){a.setState({editMode:!1}),a.props.updateStatus(a.state.status)},a.onChangeStatus=function(e){a.setState({status:e.currentTarget.value})},a}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,!1===this.state.editMode?s.a.createElement("div",{onDoubleClick:this.activeEditMode,className:xe.a.status},this.state.status||"--------"):s.a.createElement("input",{onChange:this.onChangeStatus,autoFocus:!0,onBlur:this.unActiveEditMode,value:this.state.status}))}}]),t}(s.a.Component),Me=function(e){return e.userProfile?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:xe.a.avatar},s.a.createElement("img",{src:null==e.userProfile.photos.small?ve.a:e.userProfile.photos.small,height:"100px",width:"100px"}),s.a.createElement("div",null,s.a.createElement("div",null,e.userProfile.fullName),s.a.createElement(Ie,{status:e.status,updateStatus:e.updateStatus})))):s.a.createElement(we,null)},Fe=a(51),Ge=a.n(Fe),Re=function(e){return s.a.createElement("div",{className:Ge.a.block},s.a.createElement("div",{className:Ge.a.item},e.message),s.a.createElement("span",{className:Ge.a.likely},s.a.createElement("img",{src:"https://1.bp.blogspot.com/-d3LozscUMBY/Vtz13aLffMI/AAAAAAAALp0/Y9pFym980s0/s1600/love.png",className:Ge.a.img}),e.like))},ze=a(66),We=a.n(ze),Be=Object(te.a)({form:"Post"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement(ee.a,{component:re,type:"textarea",name:"posText",className:We.a.textarea,validate:[se,oe]}),s.a.createElement("div",null,s.a.createElement("button",{className:We.a.btn},"send")))})),Ye=function(e){var t=e.newPostWay.map((function(e){return s.a.createElement(Re,{message:e.message,like:e.like})}));return s.a.createElement("div",null,s.a.createElement("div",{className:We.a.myp},s.a.createElement("div",null,"New posts"),s.a.createElement(Be,{onSubmit:function(t){e.addPostActionCreator(t)}})),t)},Ke=Object(le.b)((function(e){return{newPostWay:e.profilePage.PostData}}),{addPostActionCreator:function(e){return{type:"ADD_POST",value:e}}})(Ye),Ve=function(e){return s.a.createElement("div",null,s.a.createElement(Me,{userProfile:e.userProfile,status:e.status,updateStatus:e.updateStatus}),s.a.createElement(Ke,{store:e.store}))},He=function(e){function t(){return Object(ie.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId),this.props.getProfile(e),this.props.statusGet(e)}},{key:"render",value:function(){return s.a.createElement(Ve,this.props)}}]),t}(s.a.Component),Xe=Object(o.d)(Object(le.b)((function(e){return{userProfile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getProfile:function(e){return function(t){E(e).then((function(e){t(function(e){return{type:"NEW_PROFILE",profile:e}}(e.data))}))}},statusGet:function(e){return function(t){b(e).then((function(e){t(_(e.data))}))}},updateStatus:function(e){return function(t){h(e).then((function(a){0===a.data.resultCode&&t(_(e))}))}}}),V.f,ge)(He),qe=a(67),Je=a.n(qe),Ze=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("header",{className:Je.a.header},s.a.createElement("div",{className:Je.a.logo},s.a.createElement("img",{src:"https://demo.wellthemes.com/velocity/wp-content/uploads/2019/12/logo.png"})),s.a.createElement("div",null,e.login?s.a.createElement("div",{className:Je.a.name},e.login,s.a.createElement("button",{onClick:function(){e.getLogOut()}},"LogOut")):"You not authorized")))},Qe=function(e){function t(){return Object(ie.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"componentDidMount",value:function(){this.props.getAuthMe()}},{key:"render",value:function(){return s.a.createElement(Ze,Object.assign({},this.props,{login:this.props.login}))}}]),t}(s.a.Component),$e=Object(le.b)((function(e){return{login:e.auth.login}}),{getAuthMe:T,getLogOut:function(){return function(e){g().then((function(t){0===t.data.resultCode&&e(k(null,null,null,!1))}))}}})(Qe),et=a(68),tt=a.n(et),at=Object(te.a)({form:"Login"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("div",null,s.a.createElement(ee.a,{placeholder:"Username or Password",component:"input",type:"textarea",name:"login",className:tt.a.login})),s.a.createElement("div",null,s.a.createElement(ee.a,{placeholder:"Password",component:"input",type:"password",name:"password",className:tt.a.password})),s.a.createElement("div",null,s.a.createElement(ee.a,{component:"input",type:"checkbox",name:"rememberMe"}),"Remember me"),s.a.createElement("div",null,e.error),s.a.createElement("div",null,s.a.createElement("button",{className:tt.a.btn},"Log In")))})),nt=Object(le.b)((function(e){return{isAuth:e.auth.isAuth}}),{getLogIn:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n){f(e,t,a).then((function(e){if(0===e.data.resultCode)n(T());else{var t=e.data.messages[0];n(Object(D.a)("Login",{_error:t}))}}))}}})((function(e){return!0===e.isAuth?s.a.createElement(V.a,{to:"/profile"}):s.a.createElement("div",null,s.a.createElement("h1",null,"Login"),s.a.createElement(at,{onSubmit:function(t){e.getLogIn(t.login,t.password,t.rememberMe)}}))})),rt=function(){return s.a.createElement(Y.b,null,s.a.createElement("div",{className:"app-wrapper"},s.a.createElement($e,null),s.a.createElement(K,null),s.a.createElement("div",{className:"app-wrapper-content"},s.a.createElement(V.b,{path:"/dialogs",render:function(){return s.a.createElement(Ee,null)}}),s.a.createElement(V.b,{path:"/profile/:userId?",render:function(){return s.a.createElement(Xe,null)}}),s.a.createElement(V.b,{path:"/users",render:function(){return s.a.createElement(Le,null)}}),s.a.createElement(V.b,{path:"/news",render:function(){return s.a.createElement(H,null)}}),s.a.createElement(V.b,{path:"/music",render:function(){return s.a.createElement(X,null)}}),s.a.createElement(V.b,{path:"/settings",render:function(){return s.a.createElement(q,null)}}),s.a.createElement(V.b,{path:"/login",render:function(){return s.a.createElement(nt,null)}}))))};z.a.render(s.a.createElement(Y.a,null,s.a.createElement(le.a,{store:G},s.a.createElement(rt,null))),document.getElementById("root"))},51:function(e,t,a){e.exports={item:"Post_item__2OxKC",block:"Post_block__aBsxY",likely:"Post_likely__2z6NV",img:"Post_img__2Uoru"}},63:function(e,t,a){e.exports=a.p+"static/media/user.65d84bf5.png"},64:function(e,t,a){e.exports={avatar:"userinfo_avatar__2WOm7",status:"userinfo_status__2m7Jr"}},66:function(e,t,a){e.exports={myp:"myPosts_myp__3efv-",textarea:"myPosts_textarea__227XI",btn:"myPosts_btn__3Kk4N",post:"myPosts_post__14ouh"}},67:function(e,t,a){e.exports={header:"header_header__2nDLm",logo:"header_logo__2LwbU",name:"header_name__v1IUT"}},68:function(e,t,a){e.exports={login:"login_login__2_8IA",password:"login_password__3ZKtC",btn:"login_btn__2Wj6Z"}}},[[154,1,2]]]);
//# sourceMappingURL=main.4e8ca271.chunk.js.map